–ù–∏–∂—á–µ ‚Äî **engine-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–Ω–¥–µ—Ä—É** –¥–ª—è Fifteen Puzzles (RN + Skia), –∑ —Ñ–æ–∫—É—Å–æ–º –Ω–∞: **—Ç–æ—á–Ω—ñ—Å—Ç—å Figma**, –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–∏–π animation lifecycle, –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å ‚Äú—Ö–∞–æ—Ç–∏—á–Ω–∏—Ö hooks‚Äù, –º—ñ–Ω—ñ–º—É–º –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—ñ–≤ —Ç–∞ –∫–æ—Ä–µ–∫—Ç–Ω–µ –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è GPU-—Ä–µ—Å—É—Ä—Å—ñ–≤. –Ø —Å–ø–∏—Ä–∞—é—Å—å –Ω–∞ —Ç–µ, —â–æ –≤ –ø—Ä–æ—î–∫—Ç—ñ –≤–∂–µ —î **@shopify/react-native-skia** —ñ **react-native-reanimated**, –∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è ‚Äî **native-stack** –±–µ–∑ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è push-–µ–∫—Ä–∞–Ω—ñ–≤.

---

## 0) –û—Å–Ω–æ–≤–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è (—Ä—ñ—à–µ–Ω–Ω—è ‚Äú—è–∫ engine-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç–æ—Ä‚Äù)

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –±–∞–∑–æ–≤–∏–π –ø—ñ–¥—Ö—ñ–¥

- **–û–¥–∏–Ω Canvas –Ω–∞ Scene** (–µ–∫—Ä–∞–Ω) –¥–ª—è –≤—Å—å–æ–≥–æ ‚Äú–≥—Ä–∞—Ñ—ñ—á–Ω–æ–≥–æ —è–¥—Ä–∞‚Äù —Ü—å–æ–≥–æ –µ–∫—Ä–∞–Ω—É.
- **RN Views = layout + —ñ–Ω—Ç–µ—Ä–∞–∫—Ü—ñ—ó + –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å + —Ç–µ–∫—Å—Ç–∏**, Skia = **–≤—ñ–∑—É–∞–ª—å–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä** (—Ñ–æ–Ω, ‚Äú–∫–∞—Ä—Ç–æ—á–∫–∏‚Äù, —Ç—ñ–Ω—ñ, board, –ø–ª–∏—Ç–∫–∏, win/lose fullscreen FX).
- –î–ª—è Game-board (16 –ø–ª–∏—Ç–æ–∫): **–Ω–µ —Ä–æ–±–∏—Ç–∏ 16 Canvas**, –∞ —Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ –≤—Å—ñ –ø–ª–∏—Ç–∫–∏ **–≤ –æ–¥–Ω–æ–º—É Canvas**.

–¶–µ –¥–∞—î:

- –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–∏–π **render loop** (–æ–¥–Ω–µ –º—ñ—Å—Ü–µ, –æ–¥–∏–Ω timeline),
- –º—ñ–Ω—ñ–º—É–º surfaces / GPU –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ–≤,
- –ø—Ä–æ—Å—Ç—ñ—à–∏–π lifecycle (mount/unmount –æ–¥–Ω–æ–≥–æ Canvas),
- –ª–µ–≥—à–µ —Ä–æ–±–∏—Ç–∏ ‚Äú–¥–µ—Ç–µ—Ä–º—ñ–Ω—ñ–∑–º‚Äù –∞–Ω—ñ–º–∞—Ü—ñ–π.

---

## 1) –ú–æ–¥–µ–ª—å —à–∞—Ä—ñ–≤: Layout / Render / Animation / State

–£—è–≤–∏ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —è–∫ 4 —à–∞—Ä–∏:

### A) Layout layer (RN)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** –≥–µ–æ–º–µ—Ç—Ä—ñ—è –µ–∫—Ä–∞–Ω–∞, safe-area, —Ö–µ–¥–µ—Ä/–∫–Ω–æ–ø–∫–∏, touch-–∑–æ–Ω–∏, –º–æ–¥–∞–ª–∫–∏, —Ç–µ–∫—Å—Ç (–¥–µ —Ç—Ä–µ–±–∞ —Å–∏—Å—Ç–µ–º–Ω–∏–π —Ç–µ–∫—Å—Ç), –∞–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å.

- RN –∫–µ—Ä—É—î: `measurements`, `insets`, `boardRect`, ‚Äú–¥–µ –ª–µ–∂–∏—Ç—å board‚Äù, –∫–Ω–æ–ø–∫–∏, —Ç–æ–ø-–±–∞—Ä.
- RN **–Ω–µ –∫–µ—Ä—É—î** –∫–∞–¥—Ä-–≤-–∫–∞–¥—Ä –ø–æ–∑–∏—Ü—ñ—è–º–∏ –ø–ª–∏—Ç–æ–∫.

**–í–∏—Ö—ñ–¥ Layout layer:** —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π ‚Äúlayout snapshot‚Äù (—á–∏—Å–ª–∞), —è–∫–∏–π –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤–Ω–∏–∑ —É Render/Animation (—è–∫ –∫–æ–Ω—Ñ—ñ–≥).

---

### B) State layer (Game / UI state machine)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** —î–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ —ñ—Å—Ç–∏–Ω–∏: –ª–æ–≥—ñ–∫–∞ –≥—Ä–∏ + UI —Å—Ç–∞–Ω–∏.

–†–æ–∑–¥—ñ–ª–∏ —Å—Ç–∞–Ω–∏ –Ω–∞:

- **GameState** (–º–∞—Ç—Ä–∏—Ü—è, emptyIndex, movesCount, timer, winDetected, etc.)
- **SceneStateMachine** (–µ–∫—Ä–∞–Ω–Ω—ñ —Ñ–∞–∑–∏ —Ç–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏)

–ü—Ä–∏–∫–ª–∞–¥ —Ñ–∞–∑ –¥–ª—è GameScene:

- `entering` ‚Üí `idle`
- `dragging(tileId)` (–∞–±–æ `gesture_active`)
- `settling` (–∞–Ω—ñ–º–∞—Ü—ñ—è ‚Äú–¥–æ–∫–æ—á—É–≤–∞–Ω–Ω—è‚Äù –≤ –∫–ª—ñ—Ç–∏–Ω–∫—É)
- `win_fx` / `lose_fx`
- `exiting`

–ü–æ–¥—ñ—ó:

- `SCREEN_FOCUS / SCREEN_BLUR`
- `START_GESTURE / UPDATE_GESTURE / END_GESTURE`
- `REQUEST_MOVE(tileId)`
- `MOVE_COMMITTED`
- `WIN_DETECTED`
- `RESTART / EXIT`

**–ö–ª—é—á:** –∂–æ–¥–Ω–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è –Ω–µ —Å—Ç–∞—Ä—Ç—É—î ‚Äú–±–æ useEffect —Ç–∞–∫ –≤–∏—Ä—ñ—à–∏–≤‚Äù. –¢—ñ–ª—å–∫–∏ —á–µ—Ä–µ–∑ **event ‚Üí state machine transition**.

---

### C) Animation layer (deterministic timeline + channels)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ State ‚Üí –Ω–∞–±—ñ—Ä ‚Äú–∫–∞–Ω–∞–ª—ñ–≤‚Äù (values) –¥–ª—è —Ä–µ–Ω–¥–µ—Ä—É.

–ü—ñ–¥—Ö—ñ–¥ production-grade:

- **–æ–¥–∏–Ω master timeline** –Ω–∞ —Å—Ü–µ–Ω—É (—É–º–æ–≤–Ω–æ ‚Äúclock‚Äù),
- –¥–ª—è –∫–æ–∂–Ω–æ—ó —Å—É—Ç–Ω–æ—Å—Ç—ñ (–ø–ª–∏—Ç–∫–∞, –æ–≤–µ—Ä–ª–µ–π, —Ç—ñ–Ω—å) ‚Äî –Ω–∞–±—ñ—Ä **–∞–Ω—ñ–º-–∫–∞–Ω–∞–ª—ñ–≤**:
  - `pos(x,y)`, `scale`, `opacity`, `shadowStrength`, `blurRadius`, `highlight`, etc.

**–ü—Ä–∞–≤–∏–ª–æ:** GameState –∑–º—ñ–Ω—é—î—Ç—å—Å—è –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ (commit move), –∞ Animation layer —Ä–æ–±–∏—Ç—å –ø–ª–∞–≤–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –º—ñ–∂ –¥–∏—Å–∫—Ä–µ—Ç–Ω–∏–º–∏ —Å—Ç–∞–Ω–∞–º–∏.

---

### D) Render layer (Skia)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** —á–∏—Å—Ç–∏–π –¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä –∑ ‚Äúdraw model‚Äù.

–í—Ö—ñ–¥:

- `layoutSnapshot` (boardRect, tileSize, padding‚Ä¶)
- `drawModel` (–ø–ª–∏—Ç–∫–∏: targetPos + currentAnimPos, —Å—Ç–∏–ª—ñ, –µ—Ñ–µ–∫—Ç–∏)
- `resources` (images/fonts/shaders)

–í–∏—Ö—ñ–¥: –∫–∞–¥—Ä.

---

## 2) Scene lifecycle: –∫–æ–ª–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏/–≤–±–∏–≤–∞—Ç–∏ Canvas —ñ —Ä–µ—Å—É—Ä—Å–∏

–û—Å–∫—ñ–ª—å–∫–∏ —É —Ç–µ–±–µ **–Ω–µ–º–∞—î push-–Ω–∞–≥—Ä–æ–º–∞–¥–∂–µ–Ω–Ω—è** —ñ –µ–∫—Ä–∞–Ω –ø–æ —Å—É—Ç—ñ ‚Äú–æ–¥–∏–Ω –∞–∫—Ç–∏–≤–Ω–∏–π‚Äù, lifecycle –º–æ–∂–Ω–∞ –∑—Ä–æ–±–∏—Ç–∏ –∂–æ—Ä—Å—Ç–∫–∏–º —ñ —á–∏—Å—Ç–∏–º.

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π lifecycle (–¥–ª—è –∫–æ–∂–Ω–æ—ó Scene)

**–ù–∞ SCREEN_FOCUS:**

- ‚ÄúWarm-up‚Äù GPU-—Ä–µ—Å—É—Ä—Å—ñ–≤ —Å—Ü–µ–Ω–∏ (–¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å, —ñ–Ω—ñ—Ç —à–µ–π–¥–µ—Ä—ñ–≤/–≥—Ä–∞–¥—ñ—î–Ω—Ç—ñ–≤, –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ precomputed shadows —è–∫—â–æ —Ç—Ä–µ–±–∞).
- –°–∫–∏–¥–∞–Ω–Ω—è/—ñ–Ω—ñ—Ç state machine –≤ `entering`.
- –ó–∞–ø—É—Å–∫ `enter animation` —á–µ—Ä–µ–∑ state machine (–Ω–µ —á–µ—Ä–µ–∑ hook).

**–ù–∞ SCREEN_BLUR:**

- –ó—É–ø–∏–Ω–∏—Ç–∏ –≤—Å—ñ running animations (–∞–±–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ `paused`).
- –í—ñ–¥–≤‚Äô—è–∑–∞—Ç–∏ gesture listeners (—è–∫—â–æ –≤–æ–Ω–∏ –≤ –æ–∫—Ä–µ–º–æ–º—É –º–æ–¥—É–ª—ñ).
- –í–∏–≤—ñ–ª—å–Ω–∏—Ç–∏ heavy —Ä–µ—Å—É—Ä—Å–∏ (–¥–∏–≤. —Ä–æ–∑–¥—ñ–ª ‚Äúresources‚Äù).

**–ù–∞ UNMOUNT:**

- –ì–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ dispose/clear references (—â–æ–± –Ω–µ —Ç—Ä–∏–º–∞—Ç–∏ GPU).

> –í–∞–∂–ª–∏–≤–∏–π –ø—Ä–∏–Ω—Ü–∏–ø: **—Ñ–æ–∫—É—Å –µ–∫—Ä–∞–Ω–∞ ‚Äî —Ü–µ —Ç–≤—ñ–π ‚Äúpower switch‚Äù**. Canvas –º–æ–∂–µ –±—É—Ç–∏ –∑–∞–º–∞—É–Ω—á–µ–Ω–∏–π, –∞–ª–µ —Ä–µ–Ω–¥–µ—Ä/–∞–Ω—ñ–º–∞—Ü—ñ—ó –º–∞—é—Ç—å –±—É—Ç–∏ ‚Äúgated‚Äù —Ñ–æ–∫—É—Å–æ–º (—â–æ–± –Ω–∞ blur –Ω–µ –±—É–ª–æ –∑–∞–π–≤–æ—ó —Ä–æ–±–æ—Ç–∏).

---

## 3) Scene Canvas vs Per-tile Canvas (–ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Å—Ç—Ä–∞—Ç–µ–≥—ñ–π)

### –°—Ç—Ä–∞—Ç–µ–≥—ñ—è 1: **Single Scene Canvas (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)**

**–ü–ª—é—Å–∏**

- 1 surface ‚Üí –ø—Ä–æ—Å—Ç—ñ—à–µ GPU, –º–µ–Ω—à–µ –Ω–∞–∫–ª–∞–¥–Ω–∏—Ö –≤–∏—Ç—Ä–∞—Ç.
- 1 timeline ‚Üí –ø—Ä–æ—Å—Ç—ñ—à–µ deterministic –∞–Ω—ñ–º–∞—Ü—ñ—ó.
- –ú–æ–∂–Ω–∞ –∞–≥—Ä–µ—Å–∏–≤–Ω–æ –∫–µ—à—É–≤–∞—Ç–∏: board background, —Å—Ç–∞—Ç–∏—á–Ω—ñ —Ç—ñ–Ω—ñ, —Ä–∞–º–∫–∏.
- –ú–µ–Ω—à–µ —à–∞–Ω—Å—ñ–≤ ‚Äú–≤–∏—Ç–æ–∫—ñ–≤‚Äù (–æ–¥–Ω–∞ —Ç–æ—á–∫–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è).

**–ú—ñ–Ω—É—Å–∏**

- –¢—Ä–µ–±–∞ —Ç—Ä–æ—Ö–∏ –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω–∏: RN layout –ª–∏—à–µ –∑–∞–¥–∞—î —Ä–∞–º–∫–∏, –∞ Skia –º–∞–ª—é—î –≤—Å–µ.

**–ö–æ–ª–∏ —ñ–¥–µ–∞–ª—å–Ω–æ:** —Ç–≤—ñ–π –∫–µ–π—Å (board + —Å–∫–ª–∞–¥–Ω—ñ —Ç—ñ–Ω—ñ + win/lose fullscreen FX).

---

### –°—Ç—Ä–∞—Ç–µ–≥—ñ—è 2: **Per-tile Canvas (–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É—é)**

**–ü–ª—é—Å–∏**

- –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è: –∫–æ–∂–Ω–∞ –ø–ª–∏—Ç–∫–∞ ‚Äú—Å–∞–º–∞ –ø–æ —Å–æ–±—ñ‚Äù.
- –ü—Ä–æ—Å—Ç–∏–π mental model ‚Äú–∫–æ–º–ø–æ–Ω–µ–Ω—Ç = Canvas‚Äù.

**–ú—ñ–Ω—É—Å–∏ (–∫—Ä–∏—Ç–∏—á–Ω—ñ)**

- 16 Canvas = 16 surfaces/—Ä–µ–Ω–¥–µ—Ä-–∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ–≤/–∫–æ–º–ø–æ–∑–∏—Ü—ñ–π ‚Üí —á–∞—Å—Ç–æ –≥—ñ—Ä—à–µ –¥–ª—è GPU, –Ω—ñ–∂ –æ–¥–∏–Ω –≤–µ–ª–∏–∫–∏–π.
- –í–∞–∂–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ timeline –º—ñ–∂ –ø–ª–∏—Ç–∫–∞–º–∏ (–¥–µ—Ç–µ—Ä–º—ñ–Ω—ñ–∑–º —ñ–¥–µ –≥—ñ—Ä—à–µ).
- –ë—ñ–ª—å—à–µ —à–∞–Ω—Å—ñ–≤ –Ω–∞ leaked resources (–∫–æ–∂–µ–Ω tile —Ç—Ä–∏–º–∞—î —Å–≤–æ—ó paint/shadow/images).
- –°–∫–ª–∞–¥–Ω—ñ ‚Äú—Å–ø—ñ–ª—å–Ω—ñ‚Äù –µ—Ñ–µ–∫—Ç–∏ (—Å–ø—ñ–ª—å–Ω–∏–π drop shadow –ø—ñ–¥ —É—Å—ñ–º board) —Å—Ç–∞—é—Ç—å –Ω–µ–∑—Ä—É—á–Ω–∏–º–∏.

**–ö–æ–ª–∏ –º–æ–∂–µ –º–∞—Ç–∏ —Å–µ–Ω—Å:** –º–∞–π–∂–µ –Ω—ñ–∫–æ–ª–∏ –¥–ª—è 4√ó4, —Ö—ñ–±–∞ —â–æ –ø–ª–∏—Ç–∫–∏ ‚Äî —Ü–µ –≤—ñ–¥–µ–æ/–∫–∞–º–µ—Ä–∏/—Å—É–ø–µ—Ä–≤–∞–∂–∫—ñ –Ω–µ–∑–∞–ª–µ–∂–Ω—ñ —Å—Ü–µ–Ω–∏ (–Ω–µ —Ç–≤—ñ–π –≤–∏–ø–∞–¥–æ–∫).

---

### –°—Ç—Ä–∞—Ç–µ–≥—ñ—è 3: **Hybrid: Scene Canvas + RN overlay**

**–ü–ª—é—Å–∏**

- –ö–Ω–æ–ø–∫–∏/—Ç–µ–∫—Å—Ç/–¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å ‚Äî RN.
- –í—ñ–∑—É–∞–ª—å–Ω—ñ ‚Äú–ø—ñ–∫—Å–µ–ª—å–Ω–æ —Ç–æ—á–Ω—ñ‚Äù —Ä–µ—á—ñ ‚Äî Skia.
- Win/Lose fullscreen FX ‚Äî Skia –ø—ñ–¥ RN –∫–Ω–æ–ø–∫–∞–º–∏ (‚ÄúPlay again‚Äù).

**–ú—ñ–Ω—É—Å–∏**

- –ü–æ—Ç—Ä—ñ–±–Ω–∞ —á—ñ—Ç–∫–∞ –º–µ–∂–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ (–¥–∏–≤. –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ä–æ–∑–¥—ñ–ª).

**–¶–µ ‚Äî production-grade –∫–æ–º–ø—Ä–æ–º—ñ—Å –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö UI-—ñ–≥–æ—Ä.**

---

## 4) –î–µ –º–µ–∂–∞ –º—ñ–∂ Layout (RN) —ñ Render (Skia)

### RN —Ä–æ–±–∏—Ç—å:

- Safe area, —Ä–æ–∑–º—ñ—Ç–∫–∞ –µ–∫—Ä–∞–Ω—É.
- –†–æ–∑—Ç–∞—à—É–≤–∞–Ω–Ω—è ‚Äúboard –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞‚Äù (rect), top HUD, bottom buttons.
- Gesture capture (—è–∫—â–æ —Ç–æ–±—ñ –ø—Ä–æ—Å—Ç—ñ—à–µ —á–µ—Ä–µ–∑ RN gesture system).
- Accessibility, —Å–∏—Å—Ç–µ–º–Ω—ñ —à—Ä–∏—Ñ—Ç–∏/–ª–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è, —ñ–Ω–ø—É—Ç–∏.

### Skia —Ä–æ–±–∏—Ç—å:

- Board background (–≥—Ä–∞–¥—ñ—î–Ω—Ç–∏/—Ç–µ–∫—Å—Ç—É—Ä–∏), —Ä–∞–º–∫–∏, —Å–≤—ñ—Ç–ª–æ/—Ç—ñ–Ω—ñ.
- –ü–ª–∏—Ç–∫–∏, —ó—Ö ‚Äú–º–∞—Ç–µ—Ä—ñ–∞–ª—å–Ω—ñ—Å—Ç—å‚Äù (inner shadow, bevel, specular).
- –ü–ª–∞–≤–Ω—ñ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –ø–ª–∏—Ç–æ–∫ (–∞–Ω—ñ–º-–∫–∞–Ω–∞–ª–∏).
- Fullscreen FX (win/lose) ‚Äî bloom/blur/particles (–≤ –º–µ–∂–∞—Ö –ø–æ—Ç—Ä–µ–±).

**–ü—Ä–∞–≤–∏–ª–æ –º–µ–∂—ñ:**
RN –¥–∞—î **–≥–µ–æ–º–µ—Ç—Ä—ñ—é** —Ç–∞ **–ø–æ–¥—ñ—ó**, Skia –¥–∞—î **–ø—ñ–∫—Å–µ–ª—ñ**.

---

## 5) –Ø–∫ –º—ñ–Ω—ñ–º—ñ–∑—É–≤–∞—Ç–∏ GPU-–Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, –Ω–µ –≤—Ç—Ä–∞—Ç–∏–≤—à–∏ Figma-—Ç–æ—á–Ω—ñ—Å—Ç—å

–¢–≤–æ—è —Ü—ñ–ª—å ‚Äî —Ç–æ—á–Ω—ñ—Å—Ç—å, –∞–ª–µ ‚Äú–±–µ–∑ –¥—É—Ä–Ω–æ—ó –≤–∞—Ä—Ç–æ—Å—Ç—ñ‚Äù.

### 5.1. –ö–µ—à—É–≤–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —à–∞—Ä—ñ–≤

–£ GameScene —î –±–∞–≥–∞—Ç–æ ‚Äú–º–∞–π–∂–µ —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ‚Äù:

- —Ñ–æ–Ω –µ–∫—Ä–∞–Ω–∞,
- board —Ä–∞–º–∫–∞,
- —Å—Ç–∞—Ç–∏—á–Ω–∞ —Ç—ñ–Ω—å board,
- –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏.

–ó—Ä–æ–±–∏ —ó—Ö **immutable** —ñ —Ä–µ–Ω–¥–µ—Ä—å —è–∫ **–æ–¥–∏–Ω cached layer** (—É–º–æ–≤–Ω–æ ‚ÄúPicture/Snapshot‚Äù), –∞ –∑–≤–µ—Ä—Ö—É ‚Äî —Ç—ñ–ª—å–∫–∏ –ø–ª–∏—Ç–∫–∏ (—è–∫—ñ —Ä—É—Ö–∞—é—Ç—å—Å—è).

–ï—Ñ–µ–∫—Ç: –ø—ñ–¥ —á–∞—Å —Ä—É—Ö—É –ø–ª–∏—Ç–∫–∏ GPU –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—î **–º—ñ–Ω—ñ–º—É–º**.

### 5.2. –û–±–µ—Ä–µ–∂–Ω–æ –∑ blur/filters

Blur (–æ—Å–æ–±–ª–∏–≤–æ –≤–µ–ª–∏–∫–∏–π) ‚Äî –¥–æ—Ä–æ–≥–∏–π.

- –Ø–∫—â–æ —Ç—ñ–Ω—ñ ‚Äú–≤ —Å—Ç–∏–ª—ñ Figma‚Äù ‚Äî —á–∞—Å—Ç–æ –º–æ–∂–Ω–∞ –∑–∞–º—ñ–Ω–∏—Ç–∏ –Ω–∞:
  - precomputed shadow bitmap (–¥–ª—è –ø–ª–∏—Ç–∫–∏),
  - –≥—Ä–∞–¥—ñ—î–Ω—Ç-–º–∞—Å–∫—É,
  - –∞–±–æ –∫–µ—à–æ–≤–∞–Ω–∏–π —à–∞—Ä —Ç—ñ–Ω—ñ, —è–∫–∏–π —Ç—ñ–ª—å–∫–∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º—É—î—Ç—å—Å—è.

### 5.3. –ù–µ –ø–ª–æ–¥–∏—Ç–∏ —à—Ä–∏—Ñ—Ç–∏/–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è

- –û–¥–∏–Ω ‚Äúresource registry‚Äù –Ω–∞ —Å—Ü–µ–Ω—É.
- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ focus, –æ—á–∏—â–µ–Ω–Ω—è –Ω–∞ blur/unmount.

### 5.4. –†–µ–Ω–¥–µ—Ä —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ —Ç—Ä–µ–±–∞

–£ —Ç–µ–±–µ –Ω–µ–º–∞—î —Ñ–æ–Ω–æ–≤–æ—ó –∞–Ω—ñ–º–∞—Ü—ñ—ó ‚Äî —Ü–µ —Å—É–ø–µ—Ä.

- –£ `idle` –∫–∞–¥—Ä –º–æ–∂–µ –±—É—Ç–∏ —Å—Ç–∞—Ç–∏—á–Ω–∏–º (–∂–æ–¥–Ω–∏—Ö ‚Äútick‚Äù).
- –†–µ–Ω–¥–µ—Ä –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏:
  - `entering/exiting`
  - `dragging/settling`
  - `win_fx/lose_fx`

---

## 6) Deterministic animation: —è–∫ –∑–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ ‚Äú–æ–¥–Ω–∞–∫–æ–≤–æ –∑–∞–≤–∂–¥–∏‚Äù

–¢—É—Ç 3 –ø—Ä–∏–Ω—Ü–∏–ø–∏:

### –ü—Ä–∏–Ω—Ü–∏–ø 1: JS –Ω–µ –∑–∞–¥–∞—î —á–∞—Å –∫–∞–¥—Ä—É

–ë—É–¥—å-—è–∫–∞ –∞–Ω—ñ–º–∞—Ü—ñ—è, –¥–µ ‚Äú—á–∞—Å‚Äù —ñ–¥–µ –≤—ñ–¥ JS timers, –±—É–¥–µ –ø–ª–∞–≤–∞—Ç–∏.

**–¢–≤–æ—è —Ü—ñ–ª—å:** timeline –Ω–∞ UI thread (–∞–±–æ Skia clock), –∞ JS –ª–∏—à–µ —à—Ç–æ–≤—Ö–∞—î –¥–∏—Å–∫—Ä–µ—Ç–Ω—ñ –ø–æ–¥—ñ—ó.

### –ü—Ä–∏–Ω—Ü–∏–ø 2: Discrete state ‚Üí continuous motion

- GameState: ‚Äú–ø–ª–∏—Ç–∫–∞ –º–∞—î –±—É—Ç–∏ –≤ –∫–ª—ñ—Ç–∏–Ω—Ü—ñ (i,j)‚Äù
- Animation: ‚Äú–ø–ª–∞–≤–Ω–æ –ø–µ—Ä–µ–π–¥–∏ –∑ A ‚Üí B –∑–∞ N ms –∑ easing X‚Äù

–¶–µ –∑–Ω—ñ–º–∞—î –ø—Ä–æ–±–ª–µ–º—É ‚Äú—Ä—ñ–∑–Ω—ñ FPS = —Ä—ñ–∑–Ω–∞ –ª–æ–≥—ñ–∫–∞‚Äù.

### –ü—Ä–∏–Ω—Ü–∏–ø 3: –û–¥–∏–Ω master clock –Ω–∞ —Å—Ü–µ–Ω—É

- –í—Å—ñ –ø–ª–∏—Ç–∫–∏ —á–∏—Ç–∞—é—Ç—å –æ–¥–∏–Ω —á–∞—Å.
- –í—Å—ñ easing/—Ç—Ä–∏–≤–∞–ª–æ—Å—Ç—ñ –Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ FPS –ø—Ä–æ—Å—ñ–≤, —Ç—Ä–∞—î–∫—Ç–æ—Ä—ñ—è —ñ –∫—ñ–Ω—Ü–µ–≤–∏–π —Å—Ç–∞–Ω –æ–¥–Ω–∞–∫–æ–≤—ñ, –ª–∏—à–µ –º–µ–Ω—à–µ –∫–∞–¥—Ä—ñ–≤.

---

## 7) –Ø–∫ —É–Ω–∏–∫–Ω—É—Ç–∏ –∑–∞–π–≤–∏—Ö RN-–ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—ñ–≤

–¢–∏ —Ö–æ—á–µ—à, —â–æ–± Scene –Ω–µ ‚Äú—Ç—Ä–µ–º—Ç—ñ–ª–∞‚Äù –≤—ñ–¥ state-–æ–Ω–æ–≤–ª–µ–Ω—å.

### –ü—Ä–∞–∫—Ç–∏–∫–∞ engine-—Ä—ñ–≤–Ω—è:

- RN tree –µ–∫—Ä–∞–Ω–∞ –º–∞—î –±—É—Ç–∏ **–º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Å—Ç–∞–±—ñ–ª—å–Ω–∏–º**.
- GameState –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è —á–∞—Å—Ç–æ? ‚Üí –Ω–µ –∑–±–µ—Ä—ñ–≥–∞–π ‚Äúcurrent animated positions‚Äù —É React state.
- React state: —Ç—ñ–ª—å–∫–∏ **–¥–∏—Å–∫—Ä–µ—Ç–Ω—ñ –ø–æ–¥—ñ—ó/–ø–µ—Ä–µ—Ö–æ–¥–∏** (move committed, win).
- –ê–Ω—ñ–º-–∫–∞–Ω–∞–ª–∏ –∂–∏–≤—É—Ç—å –Ω–∞ UI/render —Ä—ñ–≤–Ω—ñ, –Ω–µ –≤ React reconciliation.

---

## 8) –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å–∞–º–∏ (GPU leak-proof)

–ó—Ä–æ–±–∏ –ø—Ä–æ—Å—Ç—É –¥–∏—Å—Ü–∏–ø–ª—ñ–Ω—É:

### Resource Registry (per Scene)

- `images` (decoded textures)
- `fonts`
- `shaders/gradients`
- `cachedPictures/snapshots`

**–ü—Ä–∞–≤–∏–ª–∞:**

1. –°—Ç–≤–æ—Ä–∏–≤ —Ä–µ—Å—É—Ä—Å ‚Äî –∑–∞—Ä–µ—î—Å—Ç—Ä—É–π.
2. –ù–∞ blur/unmount ‚Äî registry ‚ÄúdisposeAll()‚Äù.
3. –ù—ñ—è–∫–∏—Ö ‚Äú—Ä–µ—Å—É—Ä—Å—ñ–≤ —É –ø–ª–∏—Ç—Ü—ñ, —è–∫—ñ –∂–∏–≤—É—Ç—å –¥–æ–≤—à–µ –ø–ª–∏—Ç–∫–∏‚Äù.

### –û–∫—Ä–µ–º–æ: ‚Äú—Å–ø—ñ–ª—å–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏‚Äù

–Ø–∫—â–æ —î —Ä–µ—Å—É—Ä—Å–∏, —Å–ø—ñ–ª—å–Ω—ñ –¥–ª—è –±–∞–≥–∞—Ç—å–æ—Ö –µ–∫—Ä–∞–Ω—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ —Ñ–æ–Ω/—à—Ä–∏—Ñ—Ç):

- —Ç—Ä–∏–º–∞–π —ó—Ö —É –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É –∫–µ—à—ñ –∑ ref-count,
- –∞–ª–µ heavy screen-specific snapshots ‚Äî —Ç—ñ–ª—å–∫–∏ per scene.

---

## 9) –Ø–∫ –æ—Ä–≥–∞–Ω—ñ–∑—É–≤–∞—Ç–∏ Scene —è–∫ –∫–µ—Ä–æ–≤–∞–Ω–∏–π ‚Äú–¥–≤–∏–≥—É–Ω‚Äù, –∞ –Ω–µ –Ω–∞–±—ñ—Ä —Ö—É–∫—ñ–≤

–£–º–æ–≤–Ω–∏–π –∫–æ–Ω—Ü–µ–ø—Ç (–±–µ–∑ –∫–æ–¥—É):

- **SceneController**
  - –ø—Ä–∏–π–º–∞—î: events (focus/blur/gesture), game commands
  - –º–∞—î: state machine + animation scheduler
  - –≤–∏–¥–∞—î: drawModel (immutable snapshot –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∞)

- **SceneView (RN)**
  - layout –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
  - gesture capture
  - Canvas —è–∫ ‚Äúrender target‚Äù
  - RN overlays (buttons, text)

- **Renderer (Skia)**
  - —á–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—è `render(drawModel, resources)`

–¶–µ —ñ —î ‚Äúengine –º–æ–¥–µ–ª—å‚Äù: –∫–æ–Ω—Ç—Ä–æ–ª—å –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ, –∞ –Ω–µ —Ä–æ–∑–º–∞–∑–∞–Ω–æ –ø–æ hooks.

---

## 10) –©–æ —Ä–æ–±–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –¥–ª—è Fifteen Puzzles (—Ç–≤–æ—ó 3 —Ç–∏–ø–∏ –∞–Ω—ñ–º–∞—Ü—ñ—ó)

### (1) One-shot enter animation

- –¶–µ **SceneStateMachine: entering ‚Üí idle**
- –ü—ñ–¥ —á–∞—Å entering —Ä–µ–Ω–¥–µ—Ä –º–æ–∂–µ –≤–∫–ª—é—á–∞—Ç–∏:
  - fade/scale board,
  - ‚Äúlight sweep‚Äù –ø–æ —Ä–∞–º—Ü—ñ,
  - –º‚Äô—è–∫–∞ –ø–æ—è–≤–∞ —Ç—ñ–Ω—ñ.

### (2) –ü–ª–∞–≤–Ω–µ –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è –ø–ª–∏—Ç–æ–∫

- Event: `REQUEST_MOVE(tileId)`
- Transition: `idle ‚Üí settling`
- Animation scheduler:
  - lock input
  - animate tile from cellA‚ÜícellB
  - onComplete: commit GameState (swap), `settling ‚Üí idle`, unlock input

**–ö–ª—é—á:** commit –ª–æ–≥—ñ–∫–∏ ‚Äî –≤ –∫—ñ–Ω—Ü—ñ, –∞ –Ω–µ ‚Äú–ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ –∑ –∞–Ω—ñ–º–∞—Ü—ñ—î—é‚Äù.

### (3) Fullscreen Win/Lose

- Event: `WIN_DETECTED`
- Transition: `idle/settling ‚Üí win_fx`
- –†–µ–Ω–¥–µ—Ä: fullscreen FX –≤ Canvas (–ø—ñ–¥ –∫–Ω–æ–ø–∫–∞–º–∏ RN), –∞–±–æ Canvas –∑–∞–π–º–∞—î –≤–µ—Å—å –µ–∫—Ä–∞–Ω.
- –ù–∞ exit: `win_fx ‚Üí exiting` ‚Üí –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è (replace/reset) –ø—ñ—Å–ª—è ‚Äúanimation complete‚Äù.

---

## –ü—ñ–¥—Å—É–º–æ–∫ —Ä—ñ—à–µ–Ω—å (–∫–æ—Ä–æ—Ç–∫–æ, –∞–ª–µ –ø–æ-—ñ–Ω–∂–µ–Ω–µ—Ä–Ω–æ–º—É)

- **Canvas –Ω–∞ Scene** (–æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è Game/Win/Lose).
- **–ù–µ —Ä–æ–±–∏—Ç–∏ per-tile Canvas**: —Ü–µ –º–∞–π–∂–µ –∑–∞–≤–∂–¥–∏ –¥–æ—Ä–æ–∂—á–µ —ñ —Å–∫–ª–∞–¥–Ω—ñ—à–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏.
- **RN = layout + input + accessibility**, **Skia = pixels**.
- **State machine –∫–µ—Ä—É—î –≤—Å—ñ–º**: –≤—Ö–æ–¥–∏/–≤–∏—Ö–æ–¥–∏/—Ä—É—Ö–∏/–µ—Ñ–µ–∫—Ç–∏.
- **Deterministic**: –æ–¥–∏–Ω timeline, –¥–∏—Å–∫—Ä–µ—Ç–Ω–∞ –ª–æ–≥—ñ–∫–∞, –∞–Ω—ñ–º–∞—Ü—ñ—è –Ω–∞ UI/render —Ä—ñ–≤–Ω—ñ.
- **GPU hygiene**: per-scene registry, dispose –Ω–∞ blur/unmount, –∫–µ—à—É–≤–∞—Ç–∏ —Å—Ç–∞—Ç–∏—á–Ω—ñ —à–∞—Ä–∏.

---

–Ø–∫ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫ (–±–µ–∑ —É—Ç–æ—á–Ω—é—é—á–∏—Ö –ø–∏—Ç–∞–Ω—å):
–Ω–∞–¥—Å–∏–ª–∞–π **–ø–µ—Ä—à–∏–π Figma —Å–∫—Ä—ñ–Ω** (Game board + –æ–¥–Ω–∞ –ø–ª–∏—Ç–∫–∞ –∫—Ä—É–ø–Ω–æ) —ñ/–∞–±–æ CSS export ‚Äî —ñ —è —Ä–æ–∑–∫–ª–∞–¥—É –π–æ–≥–æ –Ω–∞ **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ render layers**: —â–æ –∫–µ—à—É–≤–∞—Ç–∏, —â–æ –º–∞–ª—é–≤–∞—Ç–∏ –≤–µ–∫—Ç–æ—Ä–æ–º, —â–æ —è–∫ bitmap/shadow-mask, —ñ –¥–µ —Ç–æ–±—ñ –≤–∏–≥—ñ–¥–Ω—ñ—à–µ –∑—Ä–æ–±–∏—Ç–∏ hybrid RN overlay.

–î–æ–±—Ä–µ. –§—ñ–∫—Å—É—î–º–æ **ScreenLayoutPolicy v1 + Tokens Table** —è–∫ –∫–∞–Ω–æ–Ω –¥–ª—è –≤—Å—ñ—î—ó —Å–µ—Ä—ñ—ó –µ–∫—Ä–∞–Ω—ñ–≤.

–¶–µ –Ω–µ ‚Äú–ø–æ–±–∞–∂–∞–Ω–Ω—è‚Äù, –∞ **—Å–∏—Å—Ç–µ–º–∞**, —è–∫—É —Ç–∏ –∑–º–æ–∂–µ—à –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –¥–æ 7+ –µ–∫—Ä–∞–Ω—ñ–≤ –±–µ–∑ –ø–µ—Ä–µ—Ä–æ–±–∫–∏ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏.

---

# üß± 1Ô∏è‚É£ –ë–ê–ó–ê

Design base: **390√ó844**

```
S = min(sw / 390, sh / 844)
```

–£—Å—ñ –¥–∏–∑–∞–π–Ω-—Ä–æ–∑–º—ñ—Ä–∏ –º–Ω–æ–∂–∞—Ç—å—Å—è –Ω–∞ `S`,
–∞–ª–µ –Ω–∏–∂—á–µ –¥—ñ—é—Ç—å **clamp-–ø—Ä–∞–≤–∏–ª–∞**, —â–æ–± –Ω–µ –∑–ª–∞–º–∞—Ç–∏ –≤—ñ–∑—É–∞–ª.

---

# üéõ 2Ô∏è‚É£ –ì–õ–û–ë–ê–õ–¨–ù–Ü –¢–û–ö–ï–ù–ò (–∫–∞–Ω–æ–Ω)

## 2.1 –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ñ

| Token             | –ó–Ω–∞—á–µ–Ω–Ω—è (–¥–∏–∑–∞–π–Ω) | –ü—Ä–∞–≤–∏–ª–æ               |
| ----------------- | ----------------- | --------------------- |
| sideMarginMin     | 16                | –Ω–µ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è –≤–Ω–∏–∑ |
| panelWidthDesign  | 340               | –º–Ω–æ–∂–∏–º–æ –Ω–∞ S          |
| buttonWidthDesign | 276               | –º–Ω–æ–∂–∏–º–æ –Ω–∞ S          |

---

## 2.2 –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ñ

| Token        | L0  | L1  | L2  | L3  |
| ------------ | --- | --- | --- | --- |
| panelPadding | 40  | 32  | 24  | 20  |
| panelGap     | 24  | 16  | 12  | 10  |
| spacerMin    | 24  | 16  | 8   | 0   |

> –¶—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –º–Ω–æ–∂–∞—Ç—å—Å—è –Ω–∞ `S`, –∞–ª–µ –Ω–µ –ø–∞–¥–∞—é—Ç—å –Ω–∏–∂—á–µ –º—ñ–Ω—ñ–º—É–º—É —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ.

---

## 2.3 –†–∞–¥—ñ—É—Å–∏ / –±–æ—Ä–¥–µ—Ä–∏ / —Ç—ñ–Ω—ñ

| Token                   | –ó–Ω–∞—á–µ–Ω–Ω—è |
| ----------------------- | -------- |
| radiusBase              | 8        |
| borderWidth             | 3        |
| buttonShadowOuterBlur   | 10       |
| buttonShadowInsetBlur   | 10       |
| panelInsetShadowOffsetY | 4        |
| panelInsetShadowBlur    | 4        |

### –ü—Ä–∞–≤–∏–ª–æ –º–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è:

- radius ‚Üí `8 * S`, –∞–ª–µ clamp 6‚Äì12
- borderWidth ‚Üí clamp 2‚Äì4
- blur ‚Üí –Ω–µ –º–Ω–æ–∂–∏—Ç–∏ –∞–≥—Ä–µ—Å–∏–≤–Ω–æ; clamp –º–∞–∫—Å–∏–º—É–º ~12
- inset shadow offset ‚Üí `4 * S`

---

# üìê 3Ô∏è‚É£ –ó–û–ù–ò –ï–ö–†–ê–ù–£ (–∂–æ—Ä—Å—Ç–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)

```
SafeArea
 ‚îú‚îÄ‚îÄ HeaderZone
 ‚îú‚îÄ‚îÄ SpacerA (elastic)
 ‚îú‚îÄ‚îÄ HeroZone (decorative)
 ‚îú‚îÄ‚îÄ SpacerB (elastic)
 ‚îú‚îÄ‚îÄ TitleZone
 ‚îú‚îÄ‚îÄ PanelZone
 ‚îú‚îÄ‚îÄ SpacerC (elastic)
 ‚îî‚îÄ‚îÄ FooterZone (only Home)
```

---

# üìä 4Ô∏è‚É£ –†–Ü–í–ù–Ü –î–ï–ì–†–ê–î–ê–¶–Ü–á (L0‚ÄìL4)

–í–∏–±—ñ—Ä —Ä—ñ–≤–Ω—è —Ä–æ–±–∏—Ç—å—Å—è –ø–æ –≤–∏—Å–æ—Ç—ñ –ø—ñ—Å–ª—è —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫—É S.

---

## L0 ‚Äî Normal

- Hero = FULL
- Footer = FULL
- panelPadding = 40
- panelGap = 24
- —Å–ø–µ–π—Å–µ—Ä–∏ —Ä–æ–∑–ø–æ–¥—ñ–ª—è—é—Ç—å –Ω–∞–¥–ª–∏—à–∫–æ–≤—É –≤–∏—Å–æ—Ç—É

---

## L1 ‚Äî Tight

- Hero = FULL
- Footer = COMPACT (–º–µ–Ω—à–µ –≤—ñ–¥—Å—Ç—É–ø—ñ–≤)
- panelPadding = 32
- panelGap = 16
- —Å–ø–µ–π—Å–µ—Ä–∏ –º—ñ–Ω—ñ–º—ñ–∑—É—é—Ç—å—Å—è

---

## L2 ‚Äî Low Height

- Hero = COMPACT (–∑–º–µ–Ω—à–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è)
- Footer = COMPACT
- panelPadding = 24
- panelGap = 12
- SpacerA/B = –º—ñ–Ω—ñ–º—É–º

---

## L3 ‚Äî Critical Height

- Hero = OFF
- Footer = OFF (Home only)
- panelPadding = 20
- panelGap = 10
- Spacer = 0

---

## L4 ‚Äî Emergency

- Hero = OFF
- Footer = OFF
- PanelContent ‚Üí SCROLL
- –Ω—ñ—á–æ–≥–æ –±—ñ–ª—å—à–µ –Ω–µ –º–∞—Å—à—Ç–∞–±—É—î—Ç—å—Å—è

---

# üé® 5Ô∏è‚É£ PANEL SURFACE –°–ü–ï–¶–ò–§–Ü–ö–ê–¶–Ü–Ø

```
PanelSurface:
  width = min(sw - 2*sideMarginMin, 340*S)
  height = measured content height
  fill = #71D4EB
  radius = radiusBase
  inset shadow:
      offsetY = 4
      blur = 4
      color = rgba(0,0,0,0.25)
```

–ö–µ—à—É—î—Ç—å—Å—è –ø–æ `(width, height, theme)`.

---

# üîò 6Ô∏è‚É£ BUTTON SURFACE –°–ü–ï–¶–ò–§–Ü–ö–ê–¶–Ü–Ø

### Default

```
fill = #D5F7FF
border = 3px #D5F7FF
outer shadow: 0 0 10 rgba(0,0,0,0.25)
inset shadow: 0 0 10 rgba(0,0,0,0.5)
radius = 8
```

### Pressed

```
fill = #FAFF3F
—ñ–Ω—à—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –Ω–µ–∑–º—ñ–Ω–Ω—ñ
```

> Pressed ‚Äî —Ç–∏–º—á–∞—Å–æ–≤–∏–π interaction state.
> –ù–µ –≤–∏–∫–ª–∏–∫–∞—î re-layout.
> –õ–∏—à–µ –∑–º—ñ–Ω–∞ render-token.

---

# üß† 7Ô∏è‚É£ –©–û –ú–ê–°–®–¢–ê–ë–£–Ñ–ú–û, –ê –©–û –ù–Ü

| –ï–ª–µ–º–µ–Ω—Ç     | Scale S  | Clamp     | –ù–µ –º–∞—Å—à—Ç–∞–±—É—î–º–æ |
| ----------- | -------- | --------- | -------------- |
| –ì–µ–æ–º–µ—Ç—Ä—ñ—è   | ‚úî        | ‚Äî         | ‚Äî              |
| –†–∞–¥—ñ—É—Å–∏     | ‚úî        | 6‚Äì12      | ‚Äî              |
| –ë–æ—Ä–¥–µ—Ä      | —á–∞—Å—Ç–∫–æ–≤–æ | 2‚Äì4       | ‚Äî              |
| Blur        | —á–∞—Å—Ç–∫–æ–≤–æ | max ~12   | ‚Äî              |
| –¢–∏–ø–æ–≥—Ä–∞—Ñ—ñ–∫–∞ | ‚úî        | –º—ñ–Ω 14‚Äì16 | ‚Äî              |

---

# üì± 8Ô∏è‚É£ –ß–û–ú–£ –¶–ï –†–Ü–®–ï–ù–ù–Ø –ü–†–ê–¶–Æ–Ñ –ù–ê –í–°–Ü–• –ì–ê–î–ñ–ï–¢–ê–•

‚úî –Ω–µ –ª–∞–º–∞—î –ø—Ä–æ–ø–æ—Ä—Ü—ñ—ó
‚úî –Ω–µ —Ä–æ–∑—Ç—è–≥—É—î UI
‚úî –Ω–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –¥–∏–≤–Ω–∏—Ö Motorola
‚úî –¥–æ–∑–≤–æ–ª—è—î ‚Äú–≤–∏—Å–æ–∫–∏–º‚Äù –µ–∫—Ä–∞–Ω–∞–º –≤–∏–≥–ª—è–¥–∞—Ç–∏ –ø–æ–≤—ñ—Ç—Ä—è–Ω–æ
‚úî –Ω–µ –¥–∞—î ‚Äú–º—ñ–∫—Ä–æ—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É‚Äù –Ω–∞ –Ω–∏–∑—å–∫–∏—Ö
‚úî –ø–µ—Ä–µ–¥–±–∞—á–∞—î scroll —Ç—ñ–ª—å–∫–∏ —è–∫ –∫—Ä–∞–π–Ω—ñ–π –≤–∞—Ä—ñ–∞–Ω—Ç

---

# üî© 9Ô∏è‚É£ –Ø–ö –¶–ï –õ–Ø–ì–ê–Ñ –ù–ê SKIA –ê–†–•–Ü–¢–ï–ö–¢–£–†–£

- RN —Ä–æ–±–∏—Ç—å layout snapshot (rect-–∏ –∑–æ–Ω)
- Skia —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å PanelSurface + ButtonSurfaces
- pressed ‚Üí –ª–∏—à–µ token change
- hero ‚Üí –æ–∫—Ä–µ–º–∞ —Å—Ü–µ–Ω–∞ (–ø—ñ–∑–Ω—ñ—à–µ)

---

–î–æ–±—Ä–µ. –û—Å—å —Ç–≤—ñ–π **ultra-–∫–æ—Ä–æ—Ç–∫–∏–π —á–µ–∫-–ª–∏—Å—Ç (10 —Ä—è–¥–∫—ñ–≤)** –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –∫—ñ–ª—å–∫–æ–º–∞ Android-–ø—Ä–∏—Å—Ç—Ä–æ—è–º–∏ + –µ–º—É–ª—è—Ç–æ—Ä–æ–º.

---

# üß© Fifteen Puzzles ‚Äî Android Dev Checklist

1Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏ Metro

```
pnpm dev
```

2Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä, —â–æ Metro –Ω–∞ 8081

```
netstat -ano | findstr :8081
```

3Ô∏è‚É£ –ï–º—É–ª—è—Ç–æ—Ä ‚Äî –Ω—ñ—á–æ–≥–æ –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏, –ø—Ä–æ—Å—Ç–æ –≤—ñ–¥–∫—Ä–∏–π app.

4Ô∏è‚É£ –ü—ñ–¥–∫–ª—é—á–∏–≤ –Ω–æ–≤–∏–π USB-–¥–µ–≤–∞–π—Å ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä:

```
adb devices
```

5Ô∏è‚É£ –î–ª—è –ö–û–ñ–ù–û–ì–û —Ñ—ñ–∑–∏—á–Ω–æ–≥–æ –¥–µ–≤–∞–π—Å–∞ –∑—Ä–æ–±–∏:

```
adb -s DEVICE_ID reverse tcp:8081 tcp:8081
```

6Ô∏è‚É£ –ü–µ—Ä–µ–≤—ñ—Ä reverse:

```
adb reverse --list
```

7Ô∏è‚É£ –£ Dev Menu —Ç–µ–ª–µ—Ñ–æ–Ω—É:

```
Debug server host & port ‚Üí localhost:8081
```

8Ô∏è‚É£ –Ø–∫—â–æ ‚ÄúUnable to load script‚Äù ‚Üí –∑–Ω–æ–≤—É –∑—Ä–æ–±–∏—Ç–∏ reverse.

9Ô∏è‚É£ –Ø–∫—â–æ –∑–º—ñ–Ω—é–≤–∞–≤ native/gradle/hermes ‚Üí

```
pnpm android
```

üîü –Ø–∫—â–æ –ø—Ä–æ—Å—Ç–æ –∫–æ–¥ ‚Üí –Ω—ñ—á–æ–≥–æ –Ω–µ –±—ñ–ª–¥–∏—Ç–∏, hot reload –ø—Ä–∞—Ü—é—î.

---
